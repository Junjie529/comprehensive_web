## Data Binding

در این بخش می‌خواهیم یاد بگیریم که چگونه داده‌ها را به عناصر DOM متصل (bind) کنیم و بر اساس داده‌مان عناصر جدید بسازیم.

کتاب‌خانه D3 شامل توابع مهم زیر برای bind کردن داده‌هاست:

جدول TODO

### تابع ()data

تابع data برای متصل کردن آرایه‌ای از داده‌ها به عنصرِ DOM انتخاب‌شده استفاده می‌شود و بخش انتخاب شده را آپدیت و return کند. D3 با انواع داده‌هایی نظیر آرایه‌ها، CSV, TSV, JSON, XML و … کار می‌کند.

ما می‌توانیم دو نوع داده‌ی مختلف را به تابع data ورودی دهیم: یک آرایه‌ای از اعداد/آبجکت‌ها یا یک function of data (TODO link)

مثال پیش رو نشان می‌دهد که چگونه یک آرایه را در عنصر موجود در DOM با استفاده از تابع data جایگزین کنیم:

```
<p>D3 Tutorials</p>

<script>
        var myData = ["Hello World!"];
     
        var p = d3.select("body")
            .selectAll("p")
            .data(myData)
            .text(function (d) {
                return d;
            });
</script>
```

در مثال بالا، یک پاراگراف داریم:
```<p>D3 Tutorials</p>```

سپس یک آرایه به اسم myData ساختیم که می‌خواهیم آن را در عنصر <p> جایگزین کنیم. کد بالا این گونه کار می‌کند:

ابتدا
```d3.select("body")```
عنصر body را انتخاب می‌کند. سپس 
```selectAll("p")```
همه‌ی p های موجود را برمی‌گرداند. سپس 
```data(myData)```
آرایه‌ی myData را به عناصر انتخاب‌شده bind می‌کند. این جا یک p بیشتر نداریم. لذا اولین عنصر آرایه به اولین p بایند می‌شود.

سپس کد 
```text(function(d, i) { return d; })```
به ازای هر عنصر آرایه (d) مشخص می‌کند که چه خروجی‌ای روی عناصر p قرار بگیرد.
  
توجه داشته باشید که حتما باید آرایه‌ای از داده‌ها را به عنوان myData به تابع بدهید. اگر یک مقدار constant بدهید، کار نمی‌کند.

مثال بعدی نشان می‌دهد که چگونه داده‌ها را به چند عنصر متصل کنیم:
  
```
<p> </p>
<p> </p>
<p> </p>
<script>
    var myData = ["Hello World!", "Hello D3","Hello JavaScript"];
     
        var p = d3.select("body")
                .selectAll("p")
                .data(myData)
                .text(function (d, i) {
                    return d;
                });
</script>
```

در مثال بالا اولین عنصر p مقدار اولین عنصر آرایه را می‌گیرد. دومین p دومین مقدار را می‌گیرد و سومین p نیز سومین مقدار.

مثال دیگری را با هم ببینیم:

```
<body>
    <p>D3 Tutorials </p>

    <script>
        var myData = [1, 2, 3, 4, 5];
     
         var p = d3.select("body")
                   .selectAll("p")
                   .data(myData)
                   .text(function (d, i) {
                        return d;
                    });
    </script>
</body>
```

در این مثال آرایه ۵ عضو دارد ولی ما فقط یک p داریم. در این حالت اولین عنصر سر جای خودش قرار می‌گیرد و بقیه‌ی عناصر نادیده گرفته می‌شوند.
 
برای چنین مواردی که از تعداد داده‌ها در dataset و تعداد عناصر DOM آگاه نیستیم، D3 تابع enter را در اختیار ما قرار می‌دهد. در بخش بعدی این تابع را با هم بررسی می‌کنیم.


