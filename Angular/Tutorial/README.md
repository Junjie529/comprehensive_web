<div dir="rtl">

# آموزش انگولار
در این قسمت به آموزش گام به گام فریمورک انگولار می‌پردازیم.
## 📝فهرست
  - نصب و راه‌اندازی
  - ایجاد و اجرای اولین پروژه
  - آشنایی با ساختار فایل‌ها و فولدربندی
  - ماژول‌ها، کامپوننت‌ها و سرویس‌ها
  - کار با کامپوننت‌ها
  - مرتب کردن قطعه‌های پازل!
  - امکانات ویژه در طراحی
  - منابع

## نصب و راه‌اندازی

برای نصب انگولار و cli مربوطه در ابتدا باید node.js نصب داشته باشید. برای این منظور به سایت <a target="_blank"  href="https://nodejs.org/en/">node.js</a> مراجعه کرده و نسخه‌ای بالاتر از 12.6 را دانلود کنید. 
<br>
سپس با اجرای دستور زیر در ترمینال، آخرین نسخه‌ی انگولار روی سیستم شما نصب می‌شود:

<div dir="ltr">

```
npm i -g @angular/cli
```
</div>

## ایجاد و اجرای اولین پروژه
حال وارد یک فولدر دلخواه شده و با اجرای دستور زیر، اولین پروژه انگولار خود را بسازید:
<div dir="ltr">

```
ng new first-project
```
</div>

پس از وارد کردن این دستور چند سوال از شما پرسیده می‌شود. اولی روتینگ در پروژه است که در ادامه به آن خواهیم پرداخت. <br>
دومی فرمت stylesheetهای پروژه است. در قسمت اول بهتر است، yes وارد کنید و در قسمت دوم از scss (sassy css) استفاده کنید.
برای مقایسه‌ی css و scss می‌توانید از
<a target="_blank" href="https://techprimelab.com/scss-or-css-which-is-better-find-out-here/#:~:text=SCSS%20is%20a%20special%20type,like%20CSS%20with%20better%20formatting.&text=Being%20an%20extension%20of%20CSS3,%2C%20selector%20inheritance%2C%20and%20more.">
این لینک
</a>
استفاده کنید.
<br>
در نهایت در مسیر اجرای دستور، فولدر first-project ساخته می‌شود که در قسمت بعد به بررسی اجزای آن خواهیم پرداخت.
ضمناً فرایند ایجاد پروژه به علت نصب پکیج‌های اولیه، اندکی زمان‌بر است.
<br>
اما قبل از آن، برای اجرای پروژه وارد فولدر شوید و از دستور زیر استفاده کنید:
<div dir="ltr">

```
ng serve
```
</div>

حال مرورگر خود را باز کنید و به آدرس localhost:4200 بروید و اولین پروژه انگولار خود را نظاره کنید!
<br>
<img src="https://github.com/AlirezaT99/web_workshop/blob/feature/tutorial/Angular/Tutorial/images/default-project.png"/>


## آشنایی با ساختار فایل‌ها و فولدربندی
وارد فولدر پروژه شوید. ولی آرامش خود را حفظ کنید! در اینجا با فایل‌ها و فولدرهای بسیاری مواجه می‌شویم که به لطف آنها می‌توان پروژه‌های بزرگی را به خوبی مدیریت کرد. در این بخش سعی می‌کنیم تا با کاربرد تمام قسمت‌ها آشنا شویم:
  - <b>فولدر e2e:</b> از این فولدر برای end to end testing استفاده می‌شود.
  - <b>فولدر node_modules:</b> در این فولدر حجیم(!)، تمام پکیج‌های لازم برای ساخت و اجرای پروژه قرار می‌گیرد. این فولدر را روی گیت پوش نمی‌کنیم و در مواقع نیاز(!) با دستور `npm i` .آن را می‌سازیم
  - <b>فایل Angular.json:</b> در این فایل تمام کانفیگ پروژه قرار دارد
  - <b>فایل package.json:</b> در این فایل تمامی dependencyهای پروژه قرار می‌گیرد
  - <b>فایل package-lock.json:</b> اینجا آخرین ورژن از پکیچ‌های نصب شده قابل مشاهده است.
  - <b>فایل tsconfig.json:</b> در این فایل کانفیگ‌های مرتبط با کامپایل تایپ‌اسکریپت به جاوااسکریپت قرار می‌گیرد. (به خط `"target": "es2015"` توجه کنید.) 
  - <b>فایل tslint.json:</b> در این فایل تمام قواعد کدزنی مد نظر، مانند حداکثر طول خط، ترتیب بخش‌های کلاس، و فرمت نام کامپوننت‌ها قرار می‌گیرد.
  
و اما <b>فولدر src:</b> تمام کد ما برای بخش‌های مختلف در این فولدر قرار می‌گیرد. <br>
  - <b>فولدر app:</b> ماژول‌ها و کامپوننت‌ها (قسمت اصلی پروژه) در این فولدر قرار می‌گیرد.
  - <b>فولدر assets:</b> عکس‌ها و فایل‌هایی که در برنامه به آنها نیاز داریم را در این فولدر ذخیره می‌کنیم.
  - <b>فولدر environments:</b> در فایل environments.ts در این فولدر، متغیرهای عمومی که در همه قسمت‌ها می‌خواهیم به مقدارشان دسترسی داشته باشیم، (مانند بولین production) قرار می‌گیرند
  - <b>فایل index.html:</b> فایل html اصلی پروژه که محتوای سایر کامپوننت‌ها در آن قرار می‌گیرد. در بخش‌های بعد این فایل را دقیق‌تر بررسی خواهیم کرد.
  - <b>فایل main.ts:</b> فایل تایپ‌اسکریپت اصلی پروژه که اجرای برنامه از آن شروع می‌شود و کامپوننتی که لود می‌شود در آن مشخص شده است.
  - <b>فایل polyfills.ts:</b> از این فایل برای گسترش دادن متدهای آبجکت‌های اصلی استفاده می‌شود.
  - <b>فایل styles.scss:</b> استایل‌های عمومی برنامه (مانند فونت‌ها) را در این فایل تعریف می‌کنیم تا در تمام کامپونتت‌های برنامه دیده شوند.
  - <b>فایل test.ts:</b> در این فایل یونیت-تست‌ها نوشته می‌شوند.
<br>
<img src="https://github.com/AlirezaT99/web_workshop/blob/feature/tutorial/Angular/Tutorial/images/angular-files.png"/>
<br>
در قسمت بعد به معرفی کلاس‌های تشکیل‌دهنده انگولار می‌پردازیم و بیشتر با محیط کد آشنا می‌شویم.

## ماژول‌ها، کامپوننت‌ها و سرویس‌ها
### ماژول
ماژول مجموعه‌ای از کامپوننت‌ها است که با یکدیگر وابستگی نزدیکی دارند. هر پروژه انگولار حداقل یک ماژول دارد که به آن AppModule می‌گویند و در ابتدا ساخته می‌شود. در این ماژول مشخص می‌شود که کامپوننت شروع‌کننده برنامه چیست. این کامپوننت در قسمت bootstrap مشخص می‌شود. اگر در داخل یک ماژول از ماژول دیگری استفاده شود، نام آن در import می‌آید و نام تمام کامپوننت‌های داخل ماژول نیز در declarations مشخص می‌شود.
### کامپوننت
هر پروژه‌ی انگولار از چندین کامپوننت تشکیل شده است. هر کامپوننت معماری MVVM دارد و شامل یک فایل html، یک فایل css و یک فایل ts است. اگر بالای هر کلاس ts، از دکوراتور <span dir="ltr">@Component()</span> استفاده شود، آن کلاس تبدیل به کامپوننت می‌شود. هر کامپوننت باید در داخل declarations یک ماژول تعریف شده باشد.
### سرویس
برای دریافت داده و یا logicهایی که مخصوص یک کامپوننت خاص نیست، از service استفاده می‌شود. در انگولار از Dependency Injection استفاده می‌شود. نحوه‌ی عملکرد آن به این صورت است که سرویس‌های مربوط به یک ماژول در قسمت providers موجود در ماژول، مشخص می‌شود و در زمان اجرا، آن service ساخته می‌شود و به کامپوننت‌های داخل ماژول داده می‌شود. بالای هر سرویس از دکوراتور <span dir="ltr">@Injectable()</span> استفاده می‌شود. یکی از مهم‌ترین سرویس‌های موجود در انگولار، HttpClient است. از این سرویس برای ارسال درخواست‌های Get و یا Post به سرور استفاده می‌شود. برای اطلاعات بیشتر در مورد این سرویس می‌توانید به سایت <a target="_blank" href="https://angular.io/guide/http">انگولار</a> مراجعه کنید
### روتینگ
اولین سوالی که در زمان ایجاد پروژه از شما شد، وجود routing در پروژه بود. برنامه‌های انگولار به صورت SPA یا Single Page Application هستند. به این شکل که شما تنها یک صفحه در سایت خود دارید و محتوا به صورت داینامیک در همان صفحه لود می‌شود. این که محتوای چه قسمتی در صفحه لود شود، به کمک Routing مشخص می‌شود. به صورت پیش‌فرض پس از ایجاد یک پروژه، routing زیر برای شما در فایل app-routing.module.ts به وجود خواهد آمد.

<div dir="ltr">

```typescript
const routes: Routes = [];

@NgModule({
  imports: [RouterModule.forRoot(routes)],
  exports: [RouterModule]
})

```
</div>
در اینجا مقدار routes که یک آرایه‌ای از routeها است، خالی است. اگر مقدار زیر را در آن قرار دهیم، به این معنی خواهد بود که اگر در url، آدرس test وارد شد، کامپوننت TestComponent را در صفحه به جای router-outlet لود کن. این تگ در app.component.html وجود دارد و محل لود شدن routeها را مشخص می‌کند.

<div dir="ltr">

```typescript
const routes: Routes = [
  { path: 'test', component: TestComponent }
];
```
</div>
در قسمت بعدی مفصل‌تر به این موارد و کار با کامپوننت‌ها پرداخته خواهد شد

## کار با کامپوننت‌ها
قبل از هرچیز بیایید با هم فایل app.component.ts را بررسی کنیم:
<div dir="ltr">

```typescript
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})
export class AppComponent {
  title = 'first-project';
}

```
</div>

در دکوراتور کامپوننت، سه عبارت کلیدی وجود دارد:
  - <b>سلکتور:</b> همانند تگ‌های html، هر جا که در فایل‌های html ماژول‌هایی که این کامپوننت را می‌شناسند، تگ `<app-root></app-root>` را درج کنید، تمام محتوای html مربوط به این کامپوننت آنجا لود خواهد شد!
  - <b>تمپلت:</b> اینجا فایل html مربوط به کامپوننت نشان داده می‌شود.
  - <b>استایل:</b> و اینجا آرایه‌از فایل‌های استایل مرتبط با این کامپوننت مشخص می‌شود.
<br>
به راحتی می‌توان با اجرای دستور زیر، یک کامپوننت جدید به برنامه اضافه کرد:
<div dir="ltr">

```
ng generate component my-component
```
</div>
و CLI انگولار تمام فایل‌های ts و html و scss کامپوننت را در فولدری به نام my-component می‌سازد و در app.module.ts نیز کامپوننت را ایمپورت کرده و به قسمت declarations اصافه می‌کند!

## مرتب کردن قطعه‌های پازل!
در قسمت‌های قبل به router-outlet و همچنین به selector در کامپوننت‌ها اشاره کردیم، وقت آن است که نگاهی به index.html بیندازیم:
<div dir="ltr">

```html
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>FirstProject</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
</body>
</html>
```
</div>

به body توجه کنید. تگ app-root به برنامه می‌گوید که محتویات app.component.html را اینجا نمایش دهد...
الان در فایل مذکور، کد طراحی همان صفحه‌ی اصلی که بالاتر دیدیم وجود دارد.
<br>
اما فرض کنید برنامه‌ای داریم که یک navbar همیشه بالای صفحه‌اش دارد و محتوای پس از آن با توجه به مسیری که قرار داریم پر می‌شود. در این صورت فایل app.component.html ما می‌تواند اینگونه باشد:

<div dir="ltr">

```html
<app-nav-menu></app-nav-menu>
<router-outlet></router-outlet>
```
</div>
که در آن app-nav-menu، سلکتور کامپوننتی است که برای navbar ساخته‌ایم

## امکانات ویژه در طراحی
اکنون که با کلیات طراحی پروژه در این فریمورک آشنا شدیم خوب است با امکاناتی که برای نیازهای رایج درنظر گرفته شده است نیز اندکی آشنا شویم:
### Structural directives
  - <b>بررسی شرط با *ngIf:</b> فرض کنید می‌خواهیم در صورت برقرار بودن یا نبودن یک شرط خاص رفتار متفاوتی در نمایش محتوا داشته باشیم. در مثال زیر با کمک ngIf می‌توانیم بدون نیاز به کد اضافه و صرفاً با بیان شرط (یا متغیر) این منطق را پیاده‌سازی کنیم:
<br>

<div dir="ltr">

```typescript
<div *ngIf="ali.age >= 18">Ali is {{ali.age}} years old and can drive a car!</div>
```
</div>

  - <b>اجرای حلقه با *ngFor:</b> بعنوان مثال فرض کنید جایی نیاز داریم تا تمام عناصر یک لیست را در یک قالب خاص نشان دهیم، اینجا می‌توانیم به راحتی با استفاده از ngFor نیاز خود را رفع کنیم:
  
<div dir="ltr">

```typescript
<li *ngFor="let student of students">{{student.name}}</li>
```
</div>
برای آشنایی بیشتر با این موارد (مانند ngSwitch که عملکرد switch-case را پیاده‌سازی می‌کند) می‌توانید به
<a target="_blank" href="https://angular.io/guide/structural-directives">
این صفحه
</a>
مراجعه کنید.

## منابع
  - angular.io
  - دو بخش _ایجاد پروژه_ و _معرفی ماژول‌ها_ با بهره گیری از مستندات آکادمی ستاره.

</div>
