<div align="center">
<img src="images/redis_logo.png" alt="redis_logo">
</div>

# مقدمه

**ردیس** یک ذخیره‌گاه کلید-مقداری (key-value) پیشرفته و منبع‌باز (open-source) است و اغلب از آن به عنوان سرور ساختار داده یاد می‌شود زیرا کلیدها می‌توانند شامل رشته‌ها، هش‌ها، لیست‌ها، ست‌ها و... باشند. ردیس به زبان C نوشته شده‌ و یک راه حل مناسب برای ساخت برنامه‌های کاربردی وب با کارایی بالا و قابلیت مقیاس‌پذیری است.

ردیس دارای سه ویژگی است که آن را متمایز می کنند:

<div>
    <ul dir="rtl">
      <li>پایگاه‌داده‌ی خود را به طور کامل در حافظه نگه می‌دارد و از دیسک فقط برای ماندگاری (persistence) استفاده می کند.</li>
      <li>دارای مجموعه‌ای نسبتاً غنی از انواع داده‌ها در مقایسه با بسیاری از ذخیره‌گاه‌های کلید-مقداری است.</li>
      <li>از انعکاس راهبر-پیرو (master-slave replication) پشتیبانی می‌کند و می‌تواند داده‌ها را به هر تعداد پیرو تکثیر کند.</li>
    </ul>   
</div>

# مزایا

<div>
    <ul dir="rtl">
      <li><b>سرعت فوق‌العاده:</b> ردیس بسیار سریع است به طوری که می‌تواند حدود ۱۱۰۰۰۰ درخواست SET در ثانیه و حدود ۸۱۰۰۰ درخواست GET در ثانیه را انجام دهد.</li>
      <li><b>پشتیبانی از انواع داده‌های غنی:</b> از آن جایی که ردیس از بسیاری از انواع داده‌هایی که توسعه دهندگان از قبل می شناسند پشتیبانی می‌کند، حل مشکلات مختلف آسان‌تر می‌شود زیرا می‌دانند کدام مشکل با کدام نوع داده بهتر قابل رسیدگی است.</li>
      <li><b>عملیات اتمی: </b>همه عملیات ردیس اتمی هستند و این گونه تضمین می‌کند که اگر دو کلاینت به طور همزمان دسترسی داشته باشند، سرور مقدار به‌روزشده را دریافت خواهد کرد.</li>
      <li><b>ابزار چندکاربری:</b> ردیس می‌تواند در موارد متعددی مانند ذخیره‌سازی (caching)، صف‌های پیام رسانی (messaging-queues)، هر گونه داده‌ی کوتاه مدت در برنامه‌مان، مانند سشن‌های برنامه‌های وب، تعداد بازدید صفحه‌ی وب و ... استفاده شود.</li>
    </ul>   
</div>

# نصب و تنظیمات

## نصب بر روی اوبونتو

برای نصب ردیس در اوبونتو، به ترمینال رفته و دستورات زیر را تایپ می‌کنیم:

```
$sudo apt-get update
$sudo apt-get install redis-server
```

سپس برای شروع، دستور زیر را وارد می‌کنیم:

```
$redis-server
```

با دستور زیر به redis-cli وصل می‌شویم:

```
$redis-cli 
```

با خط فرمان زیر روبرو خواهیم شد که در آن IP سیستم ما (127.0.0.1) و پورتی که سرور ردیس روی آن در حال اجراست (6379) دیده می‌شود:

```
redis 127.0.0.1:6379>
```

حالا اگر دستور ping را وارد کنیم، در صورت عملکرد درست باید پاسخ PONG را دریافت کنیم:

```
redis 127.0.0.1:6379> ping
PONG
```

## نصب بر روی ویندوز

برای نصب ردیس روی ویندوز کافیست redis-server.exe را پس از دانلود، اجرا کنیم. سپس می‌توانیم مانند بخش قبل، برای بررسی عملکرد آن، دستور ping را اجرا کنیم و ببینیم در پاسخ PONG دریافت خواهیم کرد یا خیر.

## تنظیمات

تنظیمات ردیس بر روی فایل redis.conf در دسترسند. البته علاوه بر این فایل، می‌توان از دستورات CONFIG GET و CONFIG SET برای تغییر و یا بررسی تنظیمات استفاده کرد.

```
redis 127.0.0.1:6379> CONFIG GET CONFIG_SETTING_NAME
redis 127.0.0.1:6379> CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE
```

برای حالت GET، می‌توان جای CONFIG_SETTING_NAME، * بذاریم تا تمام تنظیمات را ببینیم.

یک مثال از استفاده‌ی این دستورات به شکل زیر خواهد بود:

```
redis 127.0.0.1:6379> CONFIG SET loglevel "notice" 
OK 
redis 127.0.0.1:6379> CONFIG GET loglevel  
1) "loglevel" 
2) "notice" 
```



# انواع داده‌ها

حال انواع داده‌هایی که ردیس از آن‌ها پشتیبانی می‌کند را می‌بینیم و نحوه‌ی کارکردشان را بررسی می‌کنیم.

## رشته‌ها

رشته‌ها در ردیس دنباله‌ای از بایت هستند. آن‌ها طول مشخصی دارند که توسط هیچ کاراکتر پایان‌دهنده‌ی خاصی تعیین نمی‌شود. بنابراین می‌توان هر چیزی تا ۵۱۲ مگابایت را در یک رشته ذخیره کنید.

```
redis 127.0.0.1:6379> SET name "redis" 
OK 
redis 127.0.0.1:6379> GET name 
"redis"
```

## هش‌ها

هش‌ها در ردیس مجموعه‌ای از جفت‌های کلید-مقدارند. هش‌های ردیس مپ‌هایی بین فیلدهای رشته‌ای و مقادیر رشته‌ای هستند. از این رو، از آن‌ها برای نمایش اشیا (objects) استفاده می‌شود. هر هش می‌تواند حداکثر $۲^{۳۲}-۱$ جفت فیلد-مقدار (بیش از ۴ میلیارد) را ذخیره کند.

```
redis 127.0.0.1:6379> HMSET user:1 username redis password 
redis points 100 
OK 
redis 127.0.0.1:6379> HGETALL user:1  
1) "username" 
2) "redis" 
3) "password" 
4) "redis" 
5) "points" 
6) "100"
```

## لیست‌ها

لیست‌های ردیس، لیستی از رشته‌ها هستند که به ترتیب زمان درج مرتب شده‌اند. می‌توان عناصر را در سر یا ته لیست اضافه کرد.

```
redis 127.0.0.1:6379> lpush list redis 
(integer) 1 
redis 127.0.0.1:6379> lpush list mongodb 
(integer) 2 
redis 127.0.0.1:6379> lpush list rabitmq 
(integer) 3 
redis 127.0.0.1:6379> lrange list 0 10  

1) "rabitmq" 
2) "mongodb" 
3) "redis"

```

حداکثر طول یک لیست در ردیس، $۲^{۳۲}-۱$ عنصر است.

## مجموعه‌ها

مجموعه‌ها در ردیس، مجموعه‌ای نامرتب از رشته‌ها هستند. می توان اضافه کرد، حذف کرد و وجود یک عضو مورد نظر را در پیچیدگی زمانی O(1) آزمایش کرد. در مجموعه‌ها از هر مقدار تنها یکی می‌توان داشت.

```
redis 127.0.0.1:6379> sadd set redis 
(integer) 1 
redis 127.0.0.1:6379> sadd set mongodb 
(integer) 1 
redis 127.0.0.1:6379> sadd set rabitmq 
(integer) 1 
redis 127.0.0.1:6379> sadd set rabitmq 
(integer) 0 
redis 127.0.0.1:6379> smembers set  

1) "rabitmq" 
2) "mongodb" 
3) "redis" 
```

در بالا، می‌توان دید که دستور اضافه کردن rabitmq دو بار داده شده، اما همان‌طور که گفتیم تنها یک موردش در مجموعه خواهد ماند. حداکثر تعداد عضو یک مجموعه $۲^{۳۲}-۱$ است.

## مجموعه‌های مرتب

مجموعه‌های مرتب‌ مشابه مجموعه‌ها هستند، مجموعه‌هایی غیرتکراری از رشته‌ها. تفاوتشان در این است که هر عضو یک مجموعه‌ی مرتب با یک امتیاز همراه است که برای گرفتن مجموعه مرتب از کوچکترین به بزرگترین امتیاز استفاده می‌شود. در حالی که اعضا منحصر به فرد هستند، در میان امتیازها ممکن است تکراری باشد.

```
redis 127.0.0.1:6379> zadd sortedSet 0 redis 
(integer) 1 
redis 127.0.0.1:6379> zadd sortedSet 0 mongodb 
(integer) 1 
redis 127.0.0.1:6379> zadd sortedSet 0 rabitmq 
(integer) 1 
redis 127.0.0.1:6379> zadd sortedSet 0 rabitmq 
(integer) 0 
redis 127.0.0.1:6379> ZRANGEBYSCORE sortedSet 0 1000  

1) "redis" 
2) "mongodb" 
3) "rabitmq" 
```






